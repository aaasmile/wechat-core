package com.d1m.wechat.migrate;

import java.util.List;
import javax.annotation.Resource;

import com.alibaba.fastjson.JSON;
import lombok.extern.slf4j.Slf4j;
import org.junit.Before;
import org.junit.Test;
import org.springframework.test.annotation.Rollback;
import org.springframework.test.context.TestPropertySource;

import com.d1m.wechat.dto.WechatDto;
import com.d1m.wechat.model.User;
import com.d1m.wechat.model.Wechat;
import com.d1m.wechat.service.MigrateService;
import com.d1m.wechat.service.UserService;
import com.d1m.wechat.service.WechatService;
import com.d1m.wechat.test.SpringTest;

import static org.junit.Assert.assertEquals;

/**
 * 类描述
 *
 * @author Yuan Zhen on 2016-12-02.
 */
@Slf4j
@TestPropertySource(properties = {
        "wechat.fake=true",
        "wechat.fake.news={\"item\":[{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPZBS8kpV0LStelMU-xLNp5k\",\"content\":{\"news_item\":[{\"title\":\"You have a Finish Discount Coupon to Get\",\"author\":\"Finish\",\"digest\":\"You have a Finish delievery to confirm\",\"content\":\"<p><\\/p><p><\\/p><p><img src=\\\\\\\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1KEw1eFQqX0IY80kg0zWN2MRXI3r0ibhBicnCic9TMDVNalmvsX8RuOic4DTPhDhBH9jzWdyCUDnKTw9Q\\/0\\\\\\\" style=\\\\\\\"max-width:100%;\\\\\\\"><\\/p><p>Hi, Glad to inform you that you will get a scheduled delievery on 2017\\/01\\/10 , please click the links for details<\\/p><br  \\/>Click Confirm Delivery Links<span> <br  \\/><\\/span>\",\"content_source_url\":\"\",\"thumb_media_id\":\"YcuYaoO_CDjOC-uEJ29QPcikLckXt3kLiKuxjWo52TQ\",\"show_cover_pic\":1,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzAwMDAyNTgzMg==&mid=100000076&idx=1&sn=2ca25dc86477fd9bb1c3a92f0fa93f25&chksm=1aee74cb2d99fddd878b78a2b7ff0f997c0440ae407db6e5b948e575f678c0facb863f3833c4#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1KEw1eFQqX0IY80kg0zWN2Mw0zFMgiaicJf8fMWJvOcWtVibWCu5fwXKicS1iaxBknhxRrF1uicaVZLOicBw\\/0?wx_fmt=jpeg\"}],\"create_time\":1480235290,\"update_time\":1480235290},\"update_time\":1480235290},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPaVDEXJqqow5pHMIAMz6wXA\",\"content\":{\"news_item\":[{\"title\":\"Bulgari_Test\",\"author\":\"Bulgari\",\"digest\":\"秋意渐浓，褪去春夏的五彩喧哗，秋季是成熟、感性的，也是底蕴的沉淀。BVLGARILEGEMME宝格丽珠宝世家\",\"content\":\"<p>秋意渐浓，褪去春夏的五彩喧哗，秋季是成熟、感性的，也是底蕴的沉淀。BVLGARI LE GEMME宝格丽珠宝世家奢华香氛系列是香醇芬芳与宝石光彩的融合，正是浪漫与高贵的完美搭配。六款香氛作品代表了六种珍贵宝石，每一瓶香氛都以奢华和雅致的香调礼赞静美秋意。<\\/p><p align=\\\\\\\"center\\\\\\\" style=\\\\\\\"text-align: center;\\\\\\\"><img class=\\\\\"\\\\\" src=\\\\\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1KHHoNHeLBBz4icic7AD70gBHuBSa4ZatT9EVzbAkdnkwGHoRibAUty0g5aOLbNYTHZjSm5QZQ8Ixic8A\\/0?wx_fmt=jpeg\\\\\" style=\\\\\"max-width:100%;\\\\\"><\\/p><p><img src=\\\\\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQho2aS8ib6tiajLSfbn8EGPg6K00AQsZldRGn28RuKiaoaTHP87PBY36A3Q\\/0?wx_fmt=jpeg\\\\\" style=\\\\\"max-width:100%;\\\\\"><\\/p><p>灵感源自珍贵粉红碧玺，<span style=\\\\\"line-height: 150%;\\\\\"><b>LE GEMME - AMARENA宝格丽悦樱宝石香水<\\/b>剔透的色彩和清甜花果香的奇妙组合，将秋的思绪和感性娓娓道来。灵动的光泽似浸染了爱情的甜蜜，随着秋风拂红了枫叶，带来甜美欢愉的气息；亦如盈盈秋水，似少女顾盼间秋波流转，成为盛放在多情诗人笔下的浪漫色彩。细腻的芳泽巧妙重叠，馥郁与纯粹的花香交相辉映，谱写出深秋的诗行，于清甜芬芳中收获了满满爱情的欢欣与美妙。<\\/span><\\/p><p><\\/p><p><br  \\/><\\/p><p>紫晶与生俱来的神圣赋予了<span style=\\\\\"line-height: 150%;\\\\\"><b>LE GEMME - ASHLEMAH宝格丽焕紫宝石香水<\\/b>高贵华美的内涵，而Ashlemah意思正是“甜美的梦”，又名“梦幻的使者”，将秋日的光阴盛放入梦，绵延出绚丽华彩。焕紫宝石香水将鸢尾花、薰衣草、紫罗兰等数种珍贵花香悉数搜集，明快而不失柔和，芳醇迷人，犹如秋日蕴藏的深沉与丰富，令人沉醉其间；麝香的华贵予以天鹅绒般的触感，似添上一抹多情温柔的秋韵，惊艳了深秋，令人钟情。<\\/span><\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><\\/p><p class=\\\\\"MsoNormal\\\\\">灵感源于产自地中海的黄晶，<b><span lang=\\\\\"EN-GB\\\\\">LE GEMME - MARAVILLA<\\/span>宝格丽欣缃宝石香水<\\/b>黄晶般的色泽有如一列柑橘排列散射，从微启的瓶口扩散开来，铺就了整个秋日的色彩。柑橘的香调是阳光熏染过的芬芳，明亮而温暖，恰似一段轻快的主旋律，洋溢着金秋收获的喜悦。珍贵香料升华了香水的柔美与奢华，暗藏着秋花下的喜庆与绚烂，让人从始至终沐浴在深秋阳光的融融暖意与欢欣中。<\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><\\/p><p class=\\\\\"MsoNormal\\\\\"><b><span lang=\\\\\"EN-US\\\\\">LE GEMME - NOORAH<\\/span>宝格丽蔚蓝宝石香水<\\/b>的灵感源于神圣珍贵的绿松石，融合土耳其苍穹的湛蓝明媚和绿洲的澄澈，犹如深秋的天空，明净而高远。秋是寄托情思的，细如凝脂般的幽香、花香的淡雅、烟草木香的温暖，是来自西方的热情与东方千年古道的沉稳，相互衬托与交织，似能将人引领回几千年前的丝绸和香料之路。若有若无的水烟气息萦绕在心间，掺杂着类似蜜枣和榛果般诱人的气息，带来万种风情，在秋风中吟诵出一曲动人歌谣。<\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><b><span lang=\\\\\"EN-GB\\\\\">LE GEMME - CALALUNA<\\/span>宝格丽月光宝石香水<\\/b>灵感汲取自斯里兰卡珍贵的月光宝石，朦胧如诗，似秋语在心间呢喃，带来莫名的心悸，叫人心动不已。略带磁性的芬芳，柔和典雅，仿佛轻笼着一层锡兰城里薄薄的月纱，勾勒出魅力女性的性感多姿与神秘柔美。空气中弥漫着经年不散的馥郁香气，充满了异域风情。浓郁与淡雅的芳泽相互辉映，交织成如许的诗情画意。闭目间宛如置身科伦坡的古老城镇中，如银月光轻柔抚过脸庞。<\\/p><p class=\\\\\"MsoNormal\\\\\"><\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><\\/p><p class=\\\\\"MsoNormal\\\\\"><b><span lang=\\\\\"EN-GB\\\\\">LE GEMME - LILAIA<\\/span>宝格丽恒青宝石香水<\\/b>介于花草香味之间，珍贵如黄金的乳香融于其间，散发着温馨的香韵，轻旋出季节更迭下悄然萌发的盎然生机，带来别致的感官印记。尼罗河畔澄澈的气息席卷着新生的力量，将深秋渲染出别致的风采。香水精致的瓶身拥有不逊色于橄榄石流水般的质地，仿佛一股绿色的空气注入了透明的水晶，丰盈了秋的色彩，生动了整个秋季。<\\/p><p><\\/p><p class=\\\\\"MsoNormal\\\\\" style=\\\\\"line-height:150%;layout-grid-mode:char;mso-layout-grid-align:\\nnone\\\\\"><span lang=\\\\\"EN-GB\\\\\" style=\\\\\" mso-bidi-font-size:10.5pt;\\nline-height:150% ; ; ; ;;mso-bidi-font-family:\\nCalibri;mso-ansi-language:EN-GB \\\\\"><o:p><\\/o:p><\\/span><\\/p><p><\\/p><p class=\\\\\"MsoNormal\\\\\"><span style=\\\\\"line-height: 150%; font-family: 宋体;\\\\\"><br  \\/><\\/span><span lang=\\\\\"EN-US\\\\\" style=\\\\\" line-height: 150% ; ; ; \\\\\"><o:p><\\/o:p><\\/span><\\/p><p><br  \\/><\\/p><p><br  \\/><\\/p><p>灵感源自珍贵粉红碧玺，<span style=\\\\\"line-height: 150%;\\\\\"><b>LE GEMME - AMARENA宝格丽悦樱宝石香水<\\/b>剔透的色彩和清甜花果香的奇妙组合，将秋的思绪和感性娓娓道来。灵动的光泽似浸染了爱情的甜蜜，随着秋风拂红了枫叶，带来甜美欢愉的气息；亦如盈盈秋水，似少女顾盼间秋波流转，成为盛放在多情诗人笔下的浪漫色彩。细腻的芳泽巧妙重叠，馥郁与纯粹的花香交相辉映，谱写出深秋的诗行，于清甜芬芳中收获了满满爱情的欢欣与美妙。<\\/span><br  \\/><\\/p><p><br  \\/><\\/p><p>紫晶与生俱来的神圣赋予了<span style=\\\\\"line-height: 150%;\\\\\"><b>LE GEMME - ASHLEMAH宝格丽焕紫宝石香水<\\/b>高贵华美的内涵，而Ashlemah意思正是“甜美的梦”，又名“梦幻的使者”，将秋日的光阴盛放入梦，绵延出绚丽华彩。焕紫宝石香水将鸢尾花、薰衣草、紫罗兰等数种珍贵花香悉数搜集，明快而不失柔和，芳醇迷人，犹如秋日蕴藏的深沉与丰富，令人沉醉其间；麝香的华贵予以天鹅绒般的触感，似添上一抹多情温柔的秋韵，惊艳了深秋，令人钟情。<\\/span><\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><\\/p><p class=\\\\\"MsoNormal\\\\\">灵感源于产自地中海的黄晶，<b><span lang=\\\\\"EN-GB\\\\\">LE GEMME - MARAVILLA<\\/span>宝格丽欣缃宝石香水<\\/b>黄晶般的色泽有如一列柑橘排列散射，从微启的瓶口扩散开来，铺就了整个秋日的色彩。柑橘的香调是阳光熏染过的芬芳，明亮而温暖，恰似一段轻快的主旋律，洋溢着金秋收获的喜悦。珍贵香料升华了香水的柔美与奢华，暗藏着秋花下的喜庆与绚烂，让人从始至终沐浴在深秋阳光的融融暖意与欢欣中。<\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><\\/p><p class=\\\\\"MsoNormal\\\\\"><b><span lang=\\\\\"EN-US\\\\\">LE GEMME - NOORAH<\\/span>宝格丽蔚蓝宝石香水<\\/b>的灵感源于神圣珍贵的绿松石，融合土耳其苍穹的湛蓝明媚和绿洲的澄澈，犹如深秋的天空，明净而高远。秋是寄托情思的，细如凝脂般的幽香、花香的淡雅、烟草木香的温暖，是来自西方的热情与东方千年古道的沉稳，相互衬托与交织，似能将人引领回几千年前的丝绸和香料之路。若有若无的水烟气息萦绕在心间，掺杂着类似蜜枣和榛果般诱人的气息，带来万种风情，在秋风中吟诵出一曲动人歌谣。<\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><b><span lang=\\\\\"EN-GB\\\\\">LE GEMME - CALALUNA<\\/span>宝格丽月光宝石香水<\\/b>灵感汲取自斯里兰卡珍贵的月光宝石，朦胧如诗，似秋语在心间呢喃，带来莫名的心悸，叫人心动不已。略带磁性的芬芳，柔和典雅，仿佛轻笼着一层锡兰城里薄薄的月纱，勾勒出魅力女性的性感多姿与神秘柔美。空气中弥漫着经年不散的馥郁香气，充满了异域风情。浓郁与淡雅的芳泽相互辉映，交织成如许的诗情画意。闭目间宛如置身科伦坡的古老城镇中，如银月光轻柔抚过脸庞。<\\/p><p class=\\\\\"MsoNormal\\\\\"><\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><\\/p><p class=\\\\\"MsoNormal\\\\\"><b><span lang=\\\\\"EN-GB\\\\\">LE GEMME - LILAIA<\\/span>宝格丽恒青宝石香水<\\/b>介于花草香味之间，珍贵如黄金的乳香融于其间，散发着温馨的香韵，轻旋出季节更迭下悄然萌发的盎然生机，带来别致的感官印记。尼罗河畔澄澈的气息席卷着新生的力量，将深秋渲染出别致的风采。香水精致的瓶身拥有不逊色于橄榄石流水般的质地，仿佛一股绿色的空气注入了透明的水晶，丰盈了秋的色彩，生动了整个秋季。<\\/p><p class=\\\\\"MsoNormal\\\\\"><span style=\\\\\"line-height: 150%; font-family: 宋体;\\\\\"><br  \\/><\\/span><span lang=\\\\\"EN-US\\\\\" style=\\\\\" line-height: 150% ; ; ; \\\\\"><o:p><\\/o:p><\\/span><\\/p><p class=\\\\\"MsoNormal\\\\\" style=\\\\\"line-height:150%;layout-grid-mode:char;mso-layout-grid-align:\\nnone\\\\\"><span lang=\\\\\"EN-GB\\\\\" style=\\\\\" mso-bidi-font-size:10.5pt;\\nline-height:150% ; ; ; ;;mso-bidi-font-family:\\nCalibri;mso-ansi-language:EN-GB \\\\\"><o:p><\\/o:p><\\/span><\\/p><p><br  \\/><\\/p>\",\"content_source_url\":\"\",\"thumb_media_id\":\"YcuYaoO_CDjOC-uEJ29QPeCBFAP24L0xsdhNlIuh1-E\",\"show_cover_pic\":0,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzAwMDAyNTgzMg==&mid=100000057&idx=1&sn=841138d87b212d7cbf70b5d7df4cf936&chksm=1aee74be2d99fda8942a36bc19fbc6a7d6c52c0873a8838eeb2b8a6d3bb6530b6354697a3e6c#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1KaqANTicFGojbjTGLktIJia6agjXxrQGFvm4LzMfBnYsXtkhWpMHBica20qOxNqRV6lqpbmgJ6C0udQ\\/0?wx_fmt=jpeg\"}],\"create_time\":1479797529,\"update_time\":1479797529},\"update_time\":1479797529},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPd3jNyT-5P6z71SoAuWliak\",\"content\":{\"news_item\":[{\"title\":\"华丽点缀 Ermenegildo Zegna Couture 2016\\/17秋冬时装秀直击\",\"author\":\"杰尼亚Zegna\",\"digest\":\"北京时间2016年1月16日17点30分，ErmenegildoZegnaCouture2016\\/17秋冬时\",\"content\":\"<p align=\\\\\"center\\\\\" style=\\\\\"text-align: center;\\\\\"><img class=\\\\\"\\\\\" src=\\\\\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQhNRSv7wbThyO1IoY4l3r3CRJzW8NA9icdWeZKhibLPIhfjvLBMKNpHGgw\\/0?wx_fmt=jpeg\\\\\" style=\\\\\"max-width:100%;\\\\\"><\\/p><p><\\/p><p>光与影觥筹交错之际，Ermenegildo Zegna Couture 2016\\/17秋冬时装秀秀场被打造成暗色调圆环T台，别出心裁地铺上原色毛毯，秀场座位也特别订制，呈现别致的低调美感。秀场背景音乐选用了70年代迷幻灵魂乐队The Undisputed Truth的《Show Time》，迷离而轻快的韵律让人仿若进入Stefano Pilati的私密空间，听他轻柔诉说关于意式绅士的衣橱秘密。<\\/p><p align=\\\\\"center\\\\\" style=\\\\\"text-align: center;\\\\\"><span style=\\\\\"color: rgb(105, 105, 105); font-family: 微软雅黑, sans-serif; line-height: 22.4px; text-align: start; widows: 1;\\\\\"><span style=\\\\\"line-height: 22.4px; white-space: pre-wrap;\\\\\"><img class=\\\\\"\\\\\" src=\\\\\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQhKqJoaibVsWKfmOvOfS0S4ribpO8cohtJZSDa18DRCpiaz45hmDLvw9elw\\/0?wx_fmt=jpeg\\\\\" style=\\\\\"max-width:100%;\\\\\"><\\/span><\\/span><\\/p><section data-width=\\\\\"50%\\\\\" style=\\\\\"max-width: 100%; color: rgb(62, 62, 62); font-family: 微软雅黑; font-size: 16px; line-height: 32px; widows: 1; display: inline-block; float: left; vertical-align: top; text-align: right; width: 295px; word-wrap: break-word !important;\\\\\"><section data-width=\\\\\"100%\\\\\" style=\\\\\"text-align: center; max-width: 100%; display: table; width: 295px; color: inherit; border-color: rgb(117, 117, 118); word-wrap: break-word !important;\\\\\"><section style=\\\\\"max-width: 100%; display: table-cell; vertical-align: middle; color: rgb(255, 255, 255); border-color: rgb(117, 117, 118); word-wrap: break-word !important;\\\\\"><section data-width=\\\\\"50%\\\\\" style=\\\\\"max-width: 100%; color: rgb(62, 62, 62); line-height: 32px; display: inline-block; float: left; vertical-align: top; text-align: right; width: 295px; word-wrap: break-word !important;\\\\\"><section data-width=\\\\\"100%\\\\\" style=\\\\\"max-width: 100%; display: table; width: 295px; color: inherit; border-color: rgb(117, 117, 118); word-wrap: break-word !important;\\\\\"><section style=\\\\\"max-width: 100%; display: table-cell; vertical-align: middle; color: rgb(255, 255, 255); border-color: rgb(117, 117, 118); word-wrap: break-word !important;\\\\\"><\\/section><section style=\\\\\"margin-top: 5px; margin-left: 3px; max-width: 100%; height: 70px; border-left: 2px solid rgb(117, 117, 118); transform: rotate(35deg); background-color: rgb(254, 254, 254); word-wrap: break-word !important;\\\\\">&nbsp; &nbsp;<\\/section><\\/section><\\/section><\\/section><\\/section><\\/section><p align=\\\\\"center\\\\\" style=\\\\\"text-align: center;\\\\\"><img class=\\\\\"\\\\\" src=\\\\\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQhhMHf9nwHfOCSgjlUY8CdqgNIVKpqEsEZQa5NxdlkHKuvLLRm3NvJLA\\/0?wx_fmt=jpeg\\\\\" style=\\\\\"max-width:100%;\\\\\"><\\/p><p><br  \\/><\\/p><p style=\\\\\"text-align: left;\\\\\"><span style=\\\\\"color: rgb(105, 105, 105); font-family: 微软雅黑, sans-serif; line-height: 22.4px; white-space: pre-wrap; widows: 1;\\\\\">幽暗氛围下，一众男模身着Ermenegildo Zegna Couture 2016\\/17秋冬系列成衣优雅出场，自成一格的高定大秀正式开启。<\\/span><\\/p><p><span style=\\\\\"color: rgb(105, 105, 105); font-family: 微软雅黑, sans-serif; line-height: 22.4px; white-space: pre-wrap; widows: 1;\\\\\"><br  \\/><\\/span><\\/p><p><span style=\\\\\"color: rgb(105, 105, 105); font-family: 微软雅黑, sans-serif; line-height: 22.4px; white-space: pre-wrap; widows: 1;\\\\\"><span style=\\\\\"line-height: 22.4px; white-space: normal;\\\\\">拆分西装（Broken Suit）作为大秀开场，融合独具匠心的图案纹理将经典轮廓重新演绎，诠释出Stefano Pilati这一季以“点缀”为灵感的设计哲学。从剪羊毛廓形大衣到用缝制大衣肩膀的方式制作出提花斗篷，丰富材质与多层次搭配彰显“经典”绽放出的高雅个性。<\\/span><\\/span><\\/p><p><span style=\\\\\"color: rgb(105, 105, 105); font-family: 微软雅黑, sans-serif; line-height: 22.4px; white-space: pre-wrap; widows: 1;\\\\\"><span style=\\\\\"line-height: 22.4px; white-space: normal;\\\\\"><span style=\\\\\"font-size: 11px; line-height: 17.6px; text-align: center;\\\\\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;点击图片 可查看高清秀场图<\\/span><\\/span><\\/span><\\/p><p><br  \\/><\\/p><p><br  \\/><\\/p><p><br  \\/><\\/p>\",\"content_source_url\":\"\",\"thumb_media_id\":\"YcuYaoO_CDjOC-uEJ29QPbsfjGZHEXQOeSTMs5mXvu0\",\"show_cover_pic\":0,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzAwMDAyNTgzMg==&mid=100000054&idx=1&sn=5dc21652c1c5748237d8913dd0c333e5&chksm=1aee74b12d99fda79c5bcc9e6dbe265c537f06f16b941b1ffce7af3ae4e083f5e91f76af1946#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQhKqJoaibVsWKfmOvOfS0S4ribpO8cohtJZSDa18DRCpiaz45hmDLvw9elw\\/0?wx_fmt=jpeg\"},{\"title\":\"秋之礼赞  宝石香韵\",\"author\":\"Ｂｕｌｇａｒｉ\",\"digest\":\"BVLGARI LE GEMME宝格丽珠宝世家奢华香氛系列是香氛与宝石的融合，浪漫与高贵的完美搭配，每款香氛以奢华雅致的香调礼赞静美秋意。\",\"content\":\"<p>秋意渐浓，褪去春夏的五彩喧哗，秋季是成熟、感性的，也是底蕴的沉淀。BVLGARI LE GEMME宝格丽珠宝世家奢华香氛系列是香醇芬芳与宝石光彩的融合，正是浪漫与高贵的完美搭配。六款香氛作品代表了六种珍贵宝石，每一瓶香氛都以奢华和雅致的香调礼赞静美秋意。<br  \\/><\\/p><p><br  \\/><\\/p><p>灵感源自珍贵粉红碧玺，<span style=\\\\\"line-height: 150%;\\\\\"><b>LE GEMME - AMARENA宝格丽悦樱宝石香水<\\/b>剔透的色彩和清甜花果香的奇妙组合，将秋的思绪和感性娓娓道来。灵动的光泽似浸染了爱情的甜蜜，随着秋风拂红了枫叶，带来甜美欢愉的气息；亦如盈盈秋水，似少女顾盼间秋波流转，成为盛放在多情诗人笔下的浪漫色彩。细腻的芳泽巧妙重叠，馥郁与纯粹的花香交相辉映，谱写出深秋的诗行，于清甜芬芳中收获了满满爱情的欢欣与美妙。<\\/span><br  \\/><\\/p><p><br  \\/><\\/p><p>紫晶与生俱来的神圣赋予了<span style=\\\\\"line-height: 150%;\\\\\"><b>LE GEMME - ASHLEMAH宝格丽焕紫宝石香水<\\/b>高贵华美的内涵，而Ashlemah意思正是“甜美的梦”，又名“梦幻的使者”，将秋日的光阴盛放入梦，绵延出绚丽华彩。焕紫宝石香水将鸢尾花、薰衣草、紫罗兰等数种珍贵花香悉数搜集，明快而不失柔和，芳醇迷人，犹如秋日蕴藏的深沉与丰富，令人沉醉其间；麝香的华贵予以天鹅绒般的触感，似添上一抹多情温柔的秋韵，惊艳了深秋，令人钟情。<\\/span><\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><\\/p><p class=\\\\\"MsoNormal\\\\\">灵感源于产自地中海的黄晶，<b><span lang=\\\\\"EN-GB\\\\\">LE GEMME - MARAVILLA<\\/span>宝格丽欣缃宝石香水<\\/b>黄晶般的色泽有如一列柑橘排列散射，从微启的瓶口扩散开来，铺就了整个秋日的色彩。柑橘的香调是阳光熏染过的芬芳，明亮而温暖，恰似一段轻快的主旋律，洋溢着金秋收获的喜悦。珍贵香料升华了香水的柔美与奢华，暗藏着秋花下的喜庆与绚烂，让人从始至终沐浴在深秋阳光的融融暖意与欢欣中。<\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><\\/p><p class=\\\\\"MsoNormal\\\\\"><b><span lang=\\\\\"EN-US\\\\\">LE GEMME - NOORAH<\\/span>宝格丽蔚蓝宝石香水<\\/b>的灵感源于神圣珍贵的绿松石，融合土耳其苍穹的湛蓝明媚和绿洲的澄澈，犹如深秋的天空，明净而高远。秋是寄托情思的，细如凝脂般的幽香、花香的淡雅、烟草木香的温暖，是来自西方的热情与东方千年古道的沉稳，相互衬托与交织，似能将人引领回几千年前的丝绸和香料之路。若有若无的水烟气息萦绕在心间，掺杂着类似蜜枣和榛果般诱人的气息，带来万种风情，在秋风中吟诵出一曲动人歌谣。<\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><b><span lang=\\\\\"EN-GB\\\\\">LE GEMME - CALALUNA<\\/span>宝格丽月光宝石香水<\\/b>灵感汲取自斯里兰卡珍贵的月光宝石，朦胧如诗，似秋语在心间呢喃，带来莫名的心悸，叫人心动不已。略带磁性的芬芳，柔和典雅，仿佛轻笼着一层锡兰城里薄薄的月纱，勾勒出魅力女性的性感多姿与神秘柔美。空气中弥漫着经年不散的馥郁香气，充满了异域风情。浓郁与淡雅的芳泽相互辉映，交织成如许的诗情画意。闭目间宛如置身科伦坡的古老城镇中，如银月光轻柔抚过脸庞。<\\/p><p class=\\\\\"MsoNormal\\\\\"><\\/p><p class=\\\\\"MsoNormal\\\\\"><br  \\/><\\/p><p class=\\\\\"MsoNormal\\\\\"><b><span lang=\\\\\"EN-GB\\\\\">LE GEMME - LILAIA<\\/span>宝格丽恒青宝石香水<\\/b>介于花草香味之间，珍贵如黄金的乳香融于其间，散发着温馨的香韵，轻旋出季节更迭下悄然萌发的盎然生机，带来别致的感官印记。尼罗河畔澄澈的气息席卷着新生的力量，将深秋渲染出别致的风采。香水精致的瓶身拥有不逊色于橄榄石流水般的质地，仿佛一股绿色的空气注入了透明的水晶，丰盈了秋的色彩，生动了整个秋季。<\\/p><p class=\\\\\"MsoNormal\\\\\"><span style=\\\\\"line-height: 150%; font-family: 宋体;\\\\\"><br  \\/><\\/span><span lang=\\\\\"EN-US\\\\\" style=\\\\\" line-height: 150% ; ; ; \\\\\"><o:p><\\/o:p><\\/span><\\/p><p class=\\\\\"MsoNormal\\\\\" style=\\\\\"line-height:150%;layout-grid-mode:char;mso-layout-grid-align:\\nnone\\\\\"><span lang=\\\\\"EN-GB\\\\\" style=\\\\\" mso-bidi-font-size:10.5pt;\\nline-height:150% ; ; ; ;;mso-bidi-font-family:\\nCalibri;mso-ansi-language:EN-GB \\\\\"><o:p><\\/o:p><\\/span><\\/p>\",\"content_source_url\":\"\",\"thumb_media_id\":\"YcuYaoO_CDjOC-uEJ29QPeCBFAP24L0xsdhNlIuh1-E\",\"show_cover_pic\":0,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzAwMDAyNTgzMg==&mid=100000054&idx=2&sn=35d23a5a532fb11205fbc155075f4ab1&chksm=1aee74b12d99fda710802116ade85b63e66bb733250326d826d9a4ea6fd50cf0c9ee096a3b91#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1KaqANTicFGojbjTGLktIJia6agjXxrQGFvm4LzMfBnYsXtkhWpMHBica20qOxNqRV6lqpbmgJ6C0udQ\\/0?wx_fmt=jpeg\"}],\"create_time\":1479786717,\"update_time\":1479786717},\"update_time\":1479786717},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPTW0ga7Fim4lf5fKtEuowwE\",\"content\":{\"news_item\":[{\"title\":\"Christmas drinks\",\"author\":\"Gieves & Hawkes\",\"digest\":\"LastnightGieves&amp;HawkescelebrateditsannualChristmas\",\"content\":\"<span style=\\\\\"color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\">Last night Gieves &amp; Hawkes celebrated its annual Christmas Drinks at No.1 Savile Row in collaboration with The Gentleman's Journal&nbsp;<\\/span><span class=\\\\\"_5afx\\\\\" style=\\\\\"direction: ltr; unicode-bidi: isolate;\\\\\"><span aria-label=\\\\\"hashtag\\\\\" class=\\\\\"_58cl _5afz\\\\\" style=\\\\\"unicode-bidi: isolate; color: rgb(66, 103, 178);\\\\\">#<\\/span><span class=\\\\\"_58cm\\\\\">Christmas<\\/span><\\/span><span style=\\\\\"color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\"><\\/span><span class=\\\\\"_5afx\\\\\" style=\\\\\"direction: ltr; unicode-bidi: isolate;\\\\\"><span aria-label=\\\\\"hashtag\\\\\" class=\\\\\"_58cl _5afz\\\\\" style=\\\\\"unicode-bidi: isolate; color: rgb(66, 103, 178);\\\\\">#<\\/span><span class=\\\\\"_58cm\\\\\">SavileRow<\\/span><\\/span><span style=\\\\\"color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\">&nbsp;<\\/span><span class=\\\\\"_5afx\\\\\" style=\\\\\"direction: ltr; unicode-bidi: isolate;\\\\\"><span aria-label=\\\\\"hashtag\\\\\" class=\\\\\"_58cl _5afz\\\\\" style=\\\\\"unicode-bidi: isolate; color: rgb(66, 103, 178);\\\\\">#<\\/span><span class=\\\\\"_58cm\\\\\">London<\\/span><\\/span><span style=\\\\\"color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\">&nbsp;<\\/span>The Gentleman's Journal<span style=\\\\\"color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\">&nbsp;<\\/span>Gusbourne<span style=\\\\\"color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\">&nbsp;<\\/span>Sipsmith Independent Spirits\",\"content_source_url\":\"http:\\/\\/wiki.jikexueyuan.com\\/project\\/mysql\\/introduction.html\",\"thumb_media_id\":\"YcuYaoO_CDjOC-uEJ29QPQS78HC3USiZgDOzWditbjw\",\"show_cover_pic\":0,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzAwMDAyNTgzMg==&mid=100000038&idx=1&sn=40545c9351ba51968d50234dc288ef94&chksm=1aee74a12d99fdb7307214bad0adc4041fa2377e802b2400dc75e64b3c5acbc3a9f8bd47a2d8#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_png\\/icRCzVibWeb1KfuR3Wibeicdeumczc3sENEh3pXT8OF6rWn0JicebGjRjwsWtH0ElVjHdKK1Lfao6ossaoab604uFkg\\/0?wx_fmt=png\"}],\"create_time\":1478852653,\"update_time\":1478852653},\"update_time\":1478852653},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPZcXsFbcCbrNar0Ud1-eqoA\",\"content\":{\"news_item\":[{\"title\":\"test\",\"author\":\"ka\",\"digest\":\"k,jblbljhbkuygkuyguy\",\"content\":\"<p><img src=\\\\\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1KaqANTicFGojbjTGLktIJia6agjXxrQGFvm4LzMfBnYsXtkhWpMHBica20qOxNqRV6lqpbmgJ6C0udQ\\/0?wx_fmt=jpeg\\\\\" style=\\\\\"max-width:100%;\\\\\"><\\/p><table class=\\\\\"\\\\\"><tbody><tr><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><\\/tr><tr><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><\\/tr><tr><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><\\/tr><tr><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><\\/tr><tr><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><\\/tr><tr><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><\\/tr><tr><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><td>&nbsp;<\\/td><\\/tr><\\/tbody><\\/table><br  \\/><p><br  \\/><\\/p><pre style=\\\\\"max-width: 100%;\\\\\"><code class=\\\\\"python hljs\\\\\" codemark=\\\\\"1\\\\\">k,jblbljhb<\\/code><\\/pre><p><br  \\/><\\/p><pre style=\\\\\"max-width: 100%;\\\\\"><code class=\\\\\"http hljs\\\\\" codemark=\\\\\"1\\\\\"><span class=\\\\\"hljs-attribute\\\\\">kuygkuyguy<\\/span><\\/code><\\/pre><p><br  \\/><\\/p><iframe frameborder=\\\\\"0\\\\\" width=\\\\\"640\\\\\" height=\\\\\"498\\\\\" src=\\\\\"http:\\/\\/v.qq.com\\/iframe\\/player.html?vid=z0022tff0ud&tiny=0&amp;auto=0\\\\\" allowfullscreen=\\\\\"\\\\\"><\\/iframe>\",\"content_source_url\":\"http:\\/\\/www.fishermenlabs.com\\/\",\"thumb_media_id\":\"YcuYaoO_CDjOC-uEJ29QPeCBFAP24L0xsdhNlIuh1-E\",\"show_cover_pic\":0,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzAwMDAyNTgzMg==&mid=100000036&idx=1&sn=cc0391261c278a38ce770f5f448ebd7e&chksm=1aee74a32d99fdb592f2d21843cc0b37e9993d6df09a06a49256acd449349b571199140b0760#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/icRCzVibWeb1KaqANTicFGojbjTGLktIJia6agjXxrQGFvm4LzMfBnYsXtkhWpMHBica20qOxNqRV6lqpbmgJ6C0udQ\\/0?wx_fmt=jpeg\"}],\"create_time\":1478602104,\"update_time\":1478602104},\"update_time\":1478602104},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPbWA6OqnCKEHUcAF1Xc_4DY\",\"content\":{\"news_item\":[{\"title\":\"test\",\"author\":\"test\",\"digest\":\"test\",\"content\":\"<p><\\/p><b>test<\\/b><p>http:\\/\\/v.qq.com\\/x\\/cover\\/kgs4kzwb987o4cf\\/c0343sj6w6n.html<\\/p><p><br  \\/><\\/p>\",\"content_source_url\":\"\",\"thumb_media_id\":\"YcuYaoO_CDjOC-uEJ29QPc_3otZ0rMZzKpRwyugQsXY\",\"show_cover_pic\":1,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzAwMDAyNTgzMg==&mid=100000034&idx=1&sn=44cbdf4034c8903b0b12ea2a2f9567d6&chksm=1aee74a52d99fdb397d21f083ea615df7023974c4570ee67bd08b53137a5858fb1404d970fa6#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_png\\/icRCzVibWeb1KfuR3Wibeicdeumczc3sENEhs6wuCIbNzryoa9TqkWQ36Da0QXhusAdNU2G1U3tndfINNxviamqcJHw\\/0?wx_fmt=png\"}],\"create_time\":1478599518,\"update_time\":1478599518},\"update_time\":1478599518},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPefA0niJ5xqnYUcFP3-JfM0\",\"content\":{\"news_item\":[{\"title\":\"inspiration from the David Livingstone\",\"author\":\"Gieves & Hawkes\",\"digest\":\"OrlebarBrownandGieves&amp;Hawkeshavecollaboratedonacap\",\"content\":\"<p style=\\\\\"margin-top: 0px; margin-bottom: 6px; color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\">Orlebar Brown and Gieves &amp; Hawkes have collaborated on a capsule collection that celebrates travel and exploration with a collection of tailored ready-to-wear worthy of historic adventurers and fit for their modern counterparts.<\\/p><p style=\\\\\"margin-top: 6px; margin-bottom: 6px; color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\">Taking inspiration from the pre-eminent Scottish explorer David Livingstone, Orlebar Brown has reimagined his meticulous hand-drawn maps onto a range of utilitarian clothing in an invigorating palette of navy, congo grey and limestone.<\\/p><p style=\\\\\"margin-top: 6px; margin-bottom: 0px; display: inline; color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\"><span class=\\\\\"_5afx\\\\\" style=\\\\\"direction: ltr; unicode-bidi: isolate;\\\\\"><span aria-label=\\\\\"hashtag\\\\\" class=\\\\\"_58cl _5afz\\\\\" style=\\\\\"unicode-bidi: isolate; color: rgb(66, 103, 178);\\\\\">#<\\/span><span class=\\\\\"_58cm\\\\\">EverydayExplorers<\\/span><\\/span>&nbsp;Orlebar Brown<\\/p>\",\"content_source_url\":\"\",\"thumb_media_id\":\"YcuYaoO_CDjOC-uEJ29QPb1D3df3k3gDUKrcUFgLPD4\",\"show_cover_pic\":1,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzAwMDAyNTgzMg==&mid=100000022&idx=1&sn=5f70b1fcc5616319f075598c133e5514&chksm=1aee74912d99fd87613627481cf081619f70af2b9ef139dc19dc5d80273b24ea12fcb61dc5d8#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_png\\/icRCzVibWeb1KfuR3Wibeicdeumczc3sENEhZDnRib9BSslppNUKNcJ2Lwf15D5rqq1Jcajpahm1fxfOjIsvplgXQsw\\/0?wx_fmt=png\"}],\"create_time\":1478585891,\"update_time\":1478585891},\"update_time\":1478585891},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPULvRSf1BrSSC2GUgOFxoF0\",\"content\":{\"news_item\":[{\"title\":\"Gieves & Hawkes Autumn Winter 2016\",\"author\":\"Gieves & Hawkes\",\"digest\":\"TheAutumnWintercollectionfeaturesrelaxedpiecesdesigned\",\"content\":\"<p style=\\\\\"margin-top: 0px; margin-bottom: 6px; color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\">The Autumn Winter collection features relaxed pieces designed to be worn off duty; a collection not about settling down, rather more settling in to the modern British gentleman’s lifestyle – casual clothes made for Country house parties and for exploring the streets of a foreign city, requiring the same level of refinement and luxury as the most urban of clients expect, but in a cosy, comfortable and considered manner.<\\/p><p style=\\\\\"margin-top: 6px; margin-bottom: 6px; color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\">Discover the collecti<span class=\\\\\"text_exposed_show\\\\\" style=\\\\\"display: inline;\\\\\">on in stores and online now.<\\/span><\\/p><div class=\\\\\"text_exposed_show\\\\\" style=\\\\\"display: inline; color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif;\\\\\"><p style=\\\\\"margin-top: 0px; margin-bottom: 6px;\\\\\">www.gievesandhawkes.com<\\/p><\\/div>\",\"content_source_url\":\"\",\"thumb_media_id\":\"YcuYaoO_CDjOC-uEJ29QPUxqygGrcafRzytTrC7G1uI\",\"show_cover_pic\":0,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzAwMDAyNTgzMg==&mid=100000020&idx=1&sn=bc30347a5b7bbf672c6a9fdc9dad9bcd&chksm=1aee74932d99fd85610ee512d5b4d945cfd54517a29aa10f2634e299ecaa6835ecb2cfbc65fc#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_png\\/icRCzVibWeb1KfuR3Wibeicdeumczc3sENEhRicvMQH2Tt4oxQAkBz1VhGeP0V0icobeYZASkic9XIic0tYp2pnvcBaBQg\\/0?wx_fmt=png\"}],\"create_time\":1478584017,\"update_time\":1478584017},\"update_time\":1478584017}],\"total_count\":8,\"item_count\":8}\n",
        "wechat.fake.material={\"item\":[{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPcikLckXt3kLiKuxjWo52TQ\",\"name\":\"27162748_5b12ce3596139ee1_a0ec3b461abf4bc16ad615481260140e.jpg\",\"update_time\":1480235247,\"url\":\"http://mmbiz.qpic.cn/mmbiz_jpg/icRCzVibWeb1KEw1eFQqX0IY80kg0zWN2Mw0zFMgiaicJf8fMWJvOcWtVibWCu5fwXKicS1iaxBknhxRrF1uicaVZLOicBw/0?wx_fmt=jpeg\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPYLR_AFoy8GWrpkqQonAOPc\",\"name\":\"27162334_7d64fb2c8c6316e0_eacae30db82ffc6ae20c3bf71a1206a5.jpg\",\"update_time\":1480234993,\"url\":\"http://mmbiz.qpic.cn/mmbiz_jpg/icRCzVibWeb1KEw1eFQqX0IY80kg0zWN2MeLeJrP3Xo6TL5EBNJD9YNkwh6J3rC1aAKibDnzmtYtCkibodpAcnA4zg/0?wx_fmt=jpeg\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPRDOUvhy-V_0EJUr4ungU7k\",\"name\":\"25133557_efb426473faafe2b_4a5e687705bc436b698d9c28cffe9e26.gif\",\"update_time\":1480052141,\"url\":\"http://mmbiz.qpic.cn/mmbiz_png/icRCzVibWeb1JozIvsziaTlVxC8d1VbNl6Nf0rgBtRPeZlHOP2ZljicFFiaTlnSUj0W0sSzibYk01bDaVibmPnBrk4mfg/0?wx_fmt=gif\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPcikNk4AfxX8G1e9U4AmEO8\",\"name\":\"25133409_ca83145d2c73095f_4a5e687705bc436b698d9c28cffe9e26.gif\",\"update_time\":1480052033,\"url\":\"http://mmbiz.qpic.cn/mmbiz_png/icRCzVibWeb1JozIvsziaTlVxC8d1VbNl6Nf0rgBtRPeZlHOP2ZljicFFiaTlnSUj0W0sSzibYk01bDaVibmPnBrk4mfg/0?wx_fmt=gif\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPeGyrDzLq1NiL8w16IGdwt0\",\"name\":\"25131942_0f3fdd038a862e67_4a5e687705bc436b698d9c28cffe9e26.gif\",\"update_time\":1480051161,\"url\":\"http://mmbiz.qpic.cn/mmbiz_png/icRCzVibWeb1JozIvsziaTlVxC8d1VbNl6Nf0rgBtRPeZlHOP2ZljicFFiaTlnSUj0W0sSzibYk01bDaVibmPnBrk4mfg/0?wx_fmt=gif\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPRRE6SpbvK2aFVR0YfWfvIo\",\"name\":\"25120315_7f8611a77defff2e_4a5e687705bc436b698d9c28cffe9e26.gif\",\"update_time\":1480046573,\"url\":\"http://mmbiz.qpic.cn/mmbiz_png/icRCzVibWeb1JozIvsziaTlVxC8d1VbNl6Nf0rgBtRPeZlHOP2ZljicFFiaTlnSUj0W0sSzibYk01bDaVibmPnBrk4mfg/0?wx_fmt=gif\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPcmlk2mJBOCcpfy9LymJrf0\",\"name\":\"25120259_867a5ecbbb2ee0e0_4a5e687705bc436b698d9c28cffe9e26.gif\",\"update_time\":1480046557,\"url\":\"http://mmbiz.qpic.cn/mmbiz_png/icRCzVibWeb1JozIvsziaTlVxC8d1VbNl6Nf0rgBtRPeZlHOP2ZljicFFiaTlnSUj0W0sSzibYk01bDaVibmPnBrk4mfg/0?wx_fmt=gif\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPXh3W9Us_s-O9Qz2vUopBcU\",\"name\":\"25120246_d935cd1ffb89f88e_4a5e687705bc436b698d9c28cffe9e26.gif\",\"update_time\":1480046550,\"url\":\"http://mmbiz.qpic.cn/mmbiz_png/icRCzVibWeb1JozIvsziaTlVxC8d1VbNl6Nf0rgBtRPeZlHOP2ZljicFFiaTlnSUj0W0sSzibYk01bDaVibmPnBrk4mfg/0?wx_fmt=gif\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPRX3DE8EKP34htE4_UyoQ9k\",\"name\":\"25120023_ffb07674925bd5a0_4a5e687705bc436b698d9c28cffe9e26.gif\",\"update_time\":1480046407,\"url\":\"http://mmbiz.qpic.cn/mmbiz_png/icRCzVibWeb1JozIvsziaTlVxC8d1VbNl6Nf0rgBtRPeZlHOP2ZljicFFiaTlnSUj0W0sSzibYk01bDaVibmPnBrk4mfg/0?wx_fmt=gif\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPYmQu5IP_xy0L8pxPTc0qvA\",\"name\":\"23141522_37e6881aa637355a_048b347451ec24f22586aa35b17b625d.gif\",\"update_time\":1479881707,\"url\":\"http://mmbiz.qpic.cn/mmbiz_png/icRCzVibWeb1IwOtOaQzPnK2WiaD9GuSwKzuE4BhnlZ6PapbkRcPicicBEv9jYrsrbPepHx6LATlxjOSticjdXxYd07A/0?wx_fmt=gif\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPThhDzRiCeKN9ZhHW4TcuvQ\",\"name\":\"22235127_adc8ad04c0846bbc_be52c86473381b64fa2db615be95a72e.jpg\",\"update_time\":1479829871,\"url\":\"http://mmbiz.qpic.cn/mmbiz_jpg/icRCzVibWeb1KHHoNHeLBBz4icic7AD70gBHcibc2AsEQZ08Z8ca4GatQ5cpszRMOvGDB5micaq6Cd3LbVgb0CJYicnCQ/0?wx_fmt=jpeg\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPVSpnwJ8oDvoWkLkubh4cGE\",\"name\":\"22145210_3156624f6144c3a8_9590f607dd840f378dd0717002bb77a0.jpg\",\"update_time\":1479797514,\"url\":\"http://mmbiz.qpic.cn/mmbiz_jpg/icRCzVibWeb1KHHoNHeLBBz4icic7AD70gBHuBSa4ZatT9EVzbAkdnkwGHoRibAUty0g5aOLbNYTHZjSm5QZQ8Ixic8A/0?wx_fmt=jpeg\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPc7qIV6vefzoIGacQdYXp1E\",\"name\":\"21190827_782ff0694058cee0_6bca9df10f914f0d913b6ee8304cbedf.jpg\",\"update_time\":1479726493,\"url\":\"http://mmbiz.qpic.cn/mmbiz_jpg/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQho2aS8ib6tiajLSfbn8EGPg6K00AQsZldRGn28RuKiaoaTHP87PBY36A3Q/0?wx_fmt=jpeg\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPQqIcqQLz83VqX3n6KM5zFk\",\"name\":\"21111336_358709ef2ceb999c_37566903c68c4b4670c97b708f4feb9e.jpg\",\"update_time\":1479698000,\"url\":\"http://mmbiz.qpic.cn/mmbiz_jpg/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQhNXicQFWYvEbgCD7vShyFgGPPTA9xtrlv9jxARaicmHib3Xay8CpiabNwrA/0?wx_fmt=jpeg\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPTJiuT27rtFFBtjwFkcN9kI\",\"name\":\"21111201_63e98d0e7ca40016_a7a6968f007e5ceb0e37b9b4bf605243.jpg\",\"update_time\":1479697900,\"url\":\"http://mmbiz.qpic.cn/mmbiz_jpg/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQhhMHf9nwHfOCSgjlUY8CdqgNIVKpqEsEZQa5NxdlkHKuvLLRm3NvJLA/0?wx_fmt=jpeg\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPVlbS8LBGl2LYk09kH-3YVI\",\"name\":\"21111137_0bb8f44af42217a7_bed8ae26c31acaf0432cc13fc19f67c2.jpg\",\"update_time\":1479697881,\"url\":\"http://mmbiz.qpic.cn/mmbiz_jpg/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQhKqJoaibVsWKfmOvOfS0S4ribpO8cohtJZSDa18DRCpiaz45hmDLvw9elw/0?wx_fmt=jpeg\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPYFF0tR-oQcG7GI7Nv1ts2k\",\"name\":\"21110347_81a0e2934b0725cc_ee4f98b1de3440c585d5609633778af1.png\",\"update_time\":1479697406,\"url\":\"http://mmbiz.qpic.cn/mmbiz_png/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQhbE16ePZoul20Nz2BJ2ICiawTPiaSuTFOj3a890y3h9u8S6kXnIGWt6nQ/0?wx_fmt=png\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPVqEF-z21hLCBrIiWZhngwc\",\"name\":\"21110323_4fff048bb17fe83e_678243516f4d67a2d58977e0bf481c4e.jpg\",\"update_time\":1479697387,\"url\":\"http://mmbiz.qpic.cn/mmbiz_jpg/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQhOtF7o71z8gDib6wbpjjCwRYamGG4VDHJqNjYkw7L2s6Eib7yy3lXAJ1w/0?wx_fmt=jpeg\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPbK4crtT7I_0WWVlc184wjU\",\"name\":\"21110136_4c141452dcf770b2_38513126fa4ccf561e736fffb1a6bf30.jpg\",\"update_time\":1479697281,\"url\":\"http://mmbiz.qpic.cn/mmbiz_jpg/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQhNRSv7wbThyO1IoY4l3r3CRJzW8NA9icdWeZKhibLPIhfjvLBMKNpHGgw/0?wx_fmt=jpeg\"},{\"media_id\":\"YcuYaoO_CDjOC-uEJ29QPbsfjGZHEXQOeSTMs5mXvu0\",\"name\":\"21110026_9747287c2d33ce60_1ff9e621bc446b180f1bf44f16970c6a.jpg\",\"update_time\":1479697211,\"url\":\"http://mmbiz.qpic.cn/mmbiz_jpg/icRCzVibWeb1JcMRgib2iciauVvnhFSlibqEQhKqJoaibVsWKfmOvOfS0S4ribpO8cohtJZSDa18DRCpiaz45hmDLvw9elw/0?wx_fmt=jpeg\"}],\"total_count\":20,\"item_count\":20}\n"
})
public class MigrateServiceTest extends SpringTest {
    @Resource
    MigrateService migrateService;

    private Wechat wechat = new Wechat();
    private User user;

    @Resource
    private UserService userService;
    @Resource
    private WechatService wechatService;

    @Before
    public void setup() {
        //测试公众号
        user = userService.getByUsername("admin");
        List<WechatDto> wechatDtoList = userService.listAvailableWechat(user);
        wechat = wechatService.getById(wechatDtoList.get(0).getId());

    }

    @Test
    public void pullAndUpdateNews() throws Exception {
        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {//ignore
                }
                MigrateResult migrateResult = migrateService.migrateMaterial("news", true, wechat.getUserId(), wechat.getId());
                // 前一个线程没执行完毕, 后来的线程不再执行
                assertEquals("[任务执行中!]", migrateResult.getErrors().toString());
            }
        }).start();

        MigrateResult migrateResult = migrateService.migrateMaterial("news", true, wechat.getUserId(), wechat.getId());
        log.info("忽略的素材: \n{}", JSON.toJSONString(migrateResult.getIgnored(), true));
        log.info("捕获的错误: {}", migrateResult.getErrors());
    }

    @Test
    //@Rollback(false)
    public void pullAndNoUpdateNews() throws Exception {
        MigrateResult migrateResult = migrateService.migrateMaterial("news", false, wechat.getUserId(), wechat.getId());
        log.info("忽略的素材: \n{}", JSON.toJSONString(migrateResult.getIgnored(), true));
        log.info("捕获的错误: {}", migrateResult.getErrors());
    }

    @Test
    public void pullAndUpdateImage() throws Exception {
        migrateService.migrateMaterial("image", true, wechat.getUserId(), wechat.getId());
    }

    @Test
    //@Rollback(false)
    public void pullAndNoUpdateImage() throws Exception {
        migrateService.migrateMaterial("image", false, wechat.getUserId(), wechat.getId());
    }

    @Test
    public void pullAndUpdateVoice() throws Exception {
        migrateService.migrateMaterial("voice", true, wechat.getUserId(), wechat.getId());
    }

    @Test
    public void pullAndNoUpdateVoice() throws Exception {
        migrateService.migrateMaterial("voice", false, wechat.getUserId(), wechat.getId());
    }

    @Test
    public void pullAndUpdateVideo() throws Exception {
        migrateService.migrateMaterial("video", true, wechat.getUserId(), wechat.getId());
    }

    @Test
    public void pullAndNoUpdateVideo() throws Exception {
        migrateService.migrateMaterial("video", false, wechat.getUserId(), wechat.getId());
    }

    @Test
    @Rollback(false)
    public void testMigrateMenu() throws Exception {
        migrateService.migrateMenu(true, user, wechat.getId());
    }


    @Test
    public void migrateUser() throws Exception {
        migrateService.migrateUser(wechat.getId());
    }

}